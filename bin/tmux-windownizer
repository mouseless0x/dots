#!/usr/bin/env bash

if [[ $# -eq 1 ]]; then
    selected=$1
else
    dirs=""
    for d in ~/projects ~/work/pimlico ~/work/mev ~/mev ~/videos; do
        [ -d "$d" ] && dirs="$dirs $d"
    done
    export FZF_DEFAULT_COMMAND="find $dirs -mindepth 1 -maxdepth 1 -type d 2>/dev/null"
    export FZF_DEFAULT_OPTS="--bind='ctrl-j:down,ctrl-k:up' --layout=reverse --border --height=40%"
    selected=$(fzf)
fi

if [[ -z $selected ]];
then
    exit 0
fi

if [[ -z $TMUX ]];
then
    cd $selected && clear
    exit 0
else
    tmux send-keys C-u
    tmux send-keys "cd \"$selected\" && clear" C-m
    tmux rename-window "$(basename "$selected")"
fi
